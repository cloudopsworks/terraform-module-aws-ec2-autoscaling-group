<!-- 
  ** DO NOT EDIT THIS FILE
  ** 
  ** This file was automatically generated. 
  ** 1) Make all changes to `README.yaml` 
  ** 2) Run `make init` (you only need to do this once)
  ** 3) Run`make readme` to rebuild this file. 
  -->
[![README Header][readme_header_img]][readme_header_link]

[![cloudopsworks][logo]](https://cloudops.works/)

# Terraform EC2 Auto Scaling Group Module




Opinionated Terraform module that provisions an EC2 Auto Scaling Group (ASG) with
a Launch Template, optional module‑managed Security Group rules, IAM Role & Instance
Profile, Key Pair, and optional Secrets Manager storage for keys.

It supports:
- Fixed or flexible instance selection (Instance Requirements / Mixed Instances Policy).
- Target tracking and predictive scaling policies.
- Rolling Instance Refresh.
- Backup discovery tagging.
- Detailed configuration through a single `asg` input object.


---

This project is part of our comprehensive approach towards DevOps Acceleration. 
[<img align="right" title="Share via Email" width="24" height="24" src="https://docs.cloudops.works/images/ionicons/ios-mail.svg"/>][share_email]
[<img align="right" title="Share on Google+" width="24" height="24" src="https://docs.cloudops.works/images/ionicons/logo-googleplus.svg" />][share_googleplus]
[<img align="right" title="Share on Facebook" width="24" height="24" src="https://docs.cloudops.works/images/ionicons/logo-facebook.svg" />][share_facebook]
[<img align="right" title="Share on Reddit" width="24" height="24" src="https://docs.cloudops.works/images/ionicons/logo-reddit.svg" />][share_reddit]
[<img align="right" title="Share on LinkedIn" width="24" height="24" src="https://docs.cloudops.works/images/ionicons/logo-linkedin.svg" />][share_linkedin]
[<img align="right" title="Share on Twitter" width="24" height="24" src="https://docs.cloudops.works/images/ionicons/logo-twitter.svg" />][share_twitter]


[![Terraform Open Source Modules](https://docs.cloudops.works/images/terraform-open-source-modules.svg)][terraform_modules]



It's 100% Open Source and licensed under the [APACHE2](LICENSE).







We have [*lots of terraform modules*][terraform_modules] that are Open Source and we are trying to get them well-maintained!. Check them out!






## Introduction

This module simplifies creating production‑ready Auto Scaling Groups on AWS. It
wraps common building blocks (Launch Template, ASG, SG, IAM, Key Pair, Secrets
Manager) and exposes a single structured input `asg` that covers image selection,
user data, storage, Spot, IMDS settings, networking, scaling, and instance
refresh. Additional inputs allow you to integrate the module with your
organization conventions and tagging strategy.

## Usage


**IMPORTANT:** The `master` branch is used in `source` just as an example. In your code, do not pin to `master` because there may be breaking changes between releases.
Instead pin to the release tag (e.g. `?ref=vX.Y.Z`) of one of our [latest releases](https://github.com/cloudopsworks/terraform-module-aws-ec2-autoscaling-group/releases).


### Terragrunt Usage (Recommended)

To use this module with Terragrunt, create a `terragrunt.hcl` in your live environment
and provide the inputs as shown below. The module expects a structured `asg` object
for most configurations.

```hcl
terraform {
  source = "git::https://github.com/cloudopsworks/terraform-module-aws-ec2-autoscaling-group.git//?ref=vX.Y.Z"
}

inputs = {
  # is_hub: false # (Optional) Is this a hub or spoke configuration? Default: false.
  is_hub = false

  # spoke_def: "001" # (Optional) Spoke ID Number, must be a 3 digit number. Default: "001".
  spoke_def = "001"

  # org: # (Required) Organization details used for naming and tagging.
  org = {
    organization_name = "acme"             # (Required) Organization name
    organization_unit = "platform"         # (Required) Business unit or OU
    environment_type  = "prod"             # (Required) Env type (dev|stage|prod)
    environment_name  = "payments"         # (Required) Environment name
  }

  # extra_tags: {} # (Optional) Extra tags to add to all resources. Default: {}.
  extra_tags = {
    Owner = "platform-team@acme.com"
  }

  # name: "my-asg" # (Optional) The name of the EC2 Instance/ASG. Default: "".
  name = "payments-api"

  # asg: # (Optional) Auto Scaling Group and Launch Template configuration.
  asg = {
    create = true                            # (Optional) Default: true
    type   = "t3.micro"                      # (Conditionally required) Fixed instance type

    ami = {                                  # (Required) AMI selection logic
      id           = null                    # (Optional) Specific AMI ID
      name         = "ubuntu/images/*"      # (Optional) AMI name pattern
      owners       = ["099720109477"]        # (Optional) AMI owners (e.g., Canonical)
      most_recent  = true                    # (Optional) Default: true
    }

    vpc = {                                  # (Required) Networking configuration
      subnet_ids = ["subnet-12345678", "subnet-87654321"] # (Required)
    }

    min_size         = 2                     # (Optional) Default: 1
    max_size         = 5                     # (Optional) Default: 1
    desired_capacity = 2                     # (Optional) Default: 1

    monitoring = true                        # (Optional) Detailed monitoring. Default: false
  }
  
  # iam: # (Optional) IAM configuration for instances.
  iam = {
    create = true                            # (Optional) Default: true
    role_policies = {
      CWAgent = "arn:aws:iam::aws:policy/CloudWatchAgentServerPolicy"
    }
  }
}
```

### Full YAML Configuration Reference

The following YAML structure represents all available configuration options for the module.
You can use this as a reference when building your `inputs` for Terragrunt.

```yaml
is_hub: false # (Optional) Is this a hub or spoke configuration? Default: false.
spoke_def: "001" # (Optional) Spoke ID Number, must be a 3 digit number. Default: "001".
org: # (Required) Organization details.
  organization_name: "my-org" # (Required) Organization name.
  organization_unit: "my-unit" # (Required) Organization unit.
  environment_type: "prod" # (Required) Environment type.
  environment_name: "my-env" # (Required) Environment name.
extra_tags: {} # (Optional) Extra tags to add to the resources. Default: {}.
name: "" # (Optional) The name of the EC2 Instance. Default: "".
name_prefix: "" # (Optional) The name prefix of the EC2 Instance. Default: "".
asg:  # (Optional) Auto Scaling Group and Launch Template configuration. Created when asg.create = true (default).
  create: true  # (Optional) Whether to create ASG resources. Default: true.
  type: "t3.micro"  # (Optional) Instance type for the Launch Template. Required if not using asg.instance_requirements and asg.mixed_instances = false.
  ami:  # (Required) AMI selection. One of ami.id or ami.name must be provided to resolve an AMI.
    id: "ami-0123456789abcdef0"  # (Optional) AMI ID. If set, takes precedence over ami.name.
    name: "my-ami-*"  # (Optional) AMI name/pattern to search for when ami.id is not provided.
    architecture: "x86_64"  # (Optional) Restrict search by architecture. Default: "x86_64". Allowed values: "x86_64", "arm64".
    most_recent: true  # (Optional) Select most recent AMI when using name/filters. Default: true.
    owners: ["self"]  # (Optional) AMI owners to search. Default: ["self"]. Allowed values: "self", "amazon", "aws-marketplace", or specific AWS account IDs.
    filters:  # (Optional) Additional filters for AMI lookup.
      - name: "tag:Build"  # (Optional) Filter name as supported by EC2 describe-images API (e.g., name, tag:*, architecture, etc.).
        values: ["2025-*"]  # (Optional) Values for the above filter.
    auto_update:  # (Optional) Enable automated AMI roll-out via EventBridge + SSM Automation.
      enabled: false  # (Optional) When true, creates EventBridge rule and SSM doc to update the Launch Template to the latest AMI matching filters on backup completion events. Default: false.
  user_data: |  # (Optional) Plain-text user data. Will be base64-encoded automatically if non-empty. Default: "".
    #!/bin/bash
    echo "hello"
  user_data_base64: ""  # (Optional) Base64-encoded user data. Used only when user_data is empty. Default: "".
  monitoring: false  # (Optional) Detailed monitoring for instances (Launch Template). Default: false.
  ebs:  # (Optional) EBS and block device settings for the Launch Template.
    ebs_optimized: true  # (Optional) Enable EBS optimization. Default: AWS/AMI default.
    block_device:  # (Optional) List of block device mappings.
      - device_name: "/dev/xvda"  # (Required) Device name as recognized by the OS.
        volume_size: 8  # (Required) EBS volume size in GiB.
        volume_type: "gp3"  # (Optional) Default: "gp3". Allowed values: "gp3", "gp2", "io1", "io2", "sc1", "st1", "standard".
        iops: 3000  # (Optional) IOPS (required for io1/io2, ignored for gp2/gp3 unless specified).
        throughput: 125  # (Optional) MiB/s throughput (gp3 only).
        encrypted: false  # (Optional) Encrypt the volume. Default: false.
        kms_key_id: ""  # (Optional) KMS key ID/ARN when encrypted = true.
        delete_on_termination: true  # (Optional) Delete volume on instance termination. Default: true.
        no_device: false  # (Optional) Suppress the specified device mapping. Default: false.
        virtual_name: ""  # (Optional) For ephemeral devices (rarely used). Default: "".
  spot:  # (Optional) Spot instance options on the Launch Template.
    enabled: false  # (Optional) Enable Spot market. Default: false.
    interruption_behavior: "terminate"  # (Optional) Action on interruption. Default: "terminate". Allowed values: "hibernate", "stop", "terminate".
    instance_type: "one-time"  # (Optional) Spot request type. Default: null. Allowed values: "one-time", "persistent".
    block_duration_minutes: 60  # (Optional) Fixed hourly block duration (multiples of 60). Default: null. Allowed values: 60, 120, 180, 240, 300, 360.
  instance_requirements:  # (Optional) Flexible instance selection instead of a fixed asg.type (Launch Template).
    instance_types: ["t3a.micro"]  # (Optional) Allowed instance type names (e.g., t3a.micro).
    memory_mib:  # (Optional) Memory requirement in MiB.
      min: 0  # (Optional) Minimum memory in MiB. Default: 0.
      max: 4096  # (Optional) Maximum memory in MiB. Default: null.
    vcpu_count:  # (Optional) vCPU requirement.
      min: 0  # (Optional) Minimum vCPUs. Default: 0.
      max: 2  # (Optional) Maximum vCPUs. Default: null.
  metadata_options:  # (Optional) Instance Metadata Service (IMDS) options (Launch Template).
    http_endpoint: "enabled"  # (Optional) Control IMDS endpoint availability. Default: "enabled". Allowed values: "enabled", "disabled".
    http_put_response_hop_limit: 1  # (Optional) Allowed network hops for PUT (1-64). Default: 1.
    http_tokens: "optional"  # (Optional) Require IMDSv2 session tokens. Default: "optional". Allowed values: "required", "optional".
    instance_metadata_tags: "disabled"  # (Optional) Include instance tags in IMDS. Default: "disabled". Allowed values: "enabled", "disabled".
  key_pair:  # (Optional) Module-managed EC2 key pair.
    create: false  # (Optional) Create and attach a key pair. Default: false.
    name: ""  # (Optional) Key pair name when create = true. Default: "key/${local.name}".
  secrets_manager_enabled: true  # (Optional) When key_pair.create = true, save keys to Secrets Manager. Default: true.
  vpc:  # (Required) Networking configuration for the ASG.
    subnet_ids: ["subnet-12345"]  # (Required) Subnet IDs where instances will be launched.
    security_group_ids: ["sg-12345"]  # (Optional) Additional SGs to attach.
    availability_zones: ["us-east-1a"]  # (Optional) Explicit AZs for the ASG. Default: provider computes from subnets.
  security_group:  # (Optional) Module-managed Security Group and its rules.
    create: false  # (Optional) Create a security group. Default: false.
    rules:  # (Optional) Map of ingress/egress rules (key = rule id).
      ssh-ingress:  # (Optional) Example rule key.
        description: "Allow SSH"  # (Optional) Description. Default: "Rule for ${local.name} access".
        type: "ingress"  # (Optional) Rule direction. Default: "ingress". Allowed values: "ingress", "egress".
        protocol: "tcp"  # (Optional) Protocol. Default: "-1". Allowed values: "tcp", "udp", "icmp", "-1", etc.
        from_port: 22  # (Optional) From port (or ICMP type). Default: 0.
        to_port: 22  # (Optional) To port (or ICMP code). Default: 0.
        cidr_blocks: ["0.0.0.0/0"]  # (Optional) IPv4 CIDR ranges.
        ipv6_cidr_blocks: []  # (Optional) IPv6 CIDR ranges.
        self: false  # (Optional) If true, the SG itself is a source/destination.
        source_security_group_id: ""  # (Optional) Source SG for ingress.
  min_size: 1  # (Optional) Minimum number of instances in the ASG. Default: 1.
  max_size: 2  # (Optional) Maximum number of instances in the ASG. Default: 1.
  desired_capacity: 1  # (Optional) Desired capacity. Default: 1.
  desired: 1  # (Optional) Alias for desired_capacity. Default: 1.
  enabled_metrics: ["GroupMinSize"]  # (Optional) List of ASG metrics to collect. Default: [].
  termination_policies: ["Default"]  # (Optional) Termination policies. Default: ["Default"]. Allowed values: "OldestInstance", "OldestLaunchTemplate", "ClosestToNextInstanceHour", "Default".
  suspended_processes: ["HealthCheck"]  # (Optional) Processes to suspend. Default: []. Allowed values: "HealthCheck", "AZRebalance", "ReplaceUnhealthy", "AlarmNotification", "ScheduledActions", "AddToLoadBalancer".
  health_check:  # (Optional) Health check configuration for the ASG.
    type: "ELB"  # (Optional) Health check type. Default: "ELB". Allowed values: "EC2", "ELB".
    grace_period: 300  # (Optional) Seconds to ignore unhealthy checks after launch. Default: 300.
  force_delete: false  # (Optional) Force delete the ASG and all instances. Default: false.
  availability_zone_distribution: "balanced"  # (Optional) Capacity distribution strategy across AZs. Default: null. Allowed values: "balanced", "prioritized".
  mixed_instances: false  # (Optional) Use Mixed Instances Policy with overrides. Default: false.
  instance_types:  # (Optional) Overrides; required when mixed_instances = true.
    - type: "t3.micro"  # (Required) Instance type for this override.
      capacity: "1"  # (Optional) Weighted capacity as string. Default: "1".
  instance_refresh:  # (Optional) Rolling instance refresh strategy.
    enabled: false  # (Optional) Enable instance refresh. Default: false.
    strategy: "Rolling"  # (Optional) Refresh strategy. Default: "Rolling". Allowed values: "Rolling".
    min_healthy_percentage: 90  # (Optional) Minimum healthy percentage during refresh. Default: 90.
    max_healthy_percentage: 100  # (Optional) Maximum healthy percentage during refresh. Default: null.
    instance_warmup: 300  # (Optional) Warm-up time in seconds. Default: null.
    triggers: ["launch_template"]  # (Optional) Events that trigger refresh. Default: [].
  extra_tags:  # (Optional) Extra tags applied to instances.
    Owner: "you@example.com"
  backup:  # (Optional) Backup tagging for AWS Backup plan discovery.
    enabled: false  # (Optional) Add backup discovery tags. Default: false.
    only_tag: true  # (Optional) Apply only tags (no backup resources). Default: true.
    schedule: "daily"  # (Optional) Tag to indicate backup schedule. Default: "daily". Allowed values: "hourly", "daily", "weekly", "monthly".
  scaling_policies:  # (Optional) List of Auto Scaling policies to attach to the ASG.
    - name: "cpu-target"  # (Required) Unique policy name key.
      adjustment_type: "ChangeInCapacity"  # (Optional) For simple/step scaling. Default: "ChangeInCapacity". Allowed values: "ChangeInCapacity", "ExactCapacity", "PercentChangeInCapacity".
      scaling_adjustment: 1  # (Optional) Change amount for simple/step scaling.
      cooldown: 300  # (Optional) Cooldown in seconds. Default: 300.
      tracking_configuration:  # (Optional) Target tracking configuration.
        target_value: 50.0  # (Required) Target value for the metric.
        predefined:  # (Optional) Use a predefined ASG metric.
          metric_type: "ASGAverageCPUUtilization"  # (Required) Metric type. Allowed values: "ASGAverageCPUUtilization", "ASGAverageNetworkIn", "ASGAverageNetworkOut", "ALBRequestCountPerTarget".
          resource_label: "app/my-alb/50dc6c495c0c"  # (Optional) Required only for ALB metrics.
        customized:  # (Optional) Use CloudWatch metric math/metrics.
          metrics:  # (Optional) List of metric data queries.
            - label: "MyMetric"  # (Optional) Label for the time series.
              id: "m1"  # (Required) Unique within the policy.
              expression: "m2 / m3"  # (Optional) Metric math expression.
              return_data: true  # (Optional) Whether to return this time series. Default: true.
              metric_stat:  # (Optional) Required when not using expression.
                metric:
                  namespace: "AWS/EC2"  # (Required) Metric namespace.
                  metric_name: "CPUUtilization"  # (Required) Metric name.
                  dimensions:  # (Optional) Metric dimensions.
                    - name: "AutoScalingGroupName"  # (Required) Dimension name.
                      value: "my-asg"  # (Required) Dimension value.
                stat: "Average"  # (Required) Statistic.
                period: 60  # (Required) Period in seconds.
                unit: "Percent"  # (Optional) Unit for the metric.
      predictive_scaling:  # (Optional) Predictive scaling configuration.
        target_value: 50.0  # (Required) Target capacity utilization.
        metric_pair:  # (Optional) Predefined pair metric for load vs. capacity.
          metric_type: "ALBRequestCountPerTarget"  # (Required) Predefined pair type.
          resource_label: "app/my-alb/50dc6c495c0c"  # (Required for ALB metrics) Resource label.
        customized_load:  # (Optional) Customized load metric.
          id: "load1"  # (Required) Unique identifier.
          label: "Load"  # (Optional) Label for the metric.
          expression: ""  # (Optional) Math expression.
          return_data: true  # (Optional) Default: true.
          metric_stat:  # (Optional) Metric statistics.
            metric:
              namespace: "AWS/EC2"
              metric_name: "CPUUtilization"
              dimensions:
                - name: "AutoScalingGroupName"
                  value: "my-asg"
            stat: "Average"
            unit: "Percent"
        customized_capacity:  # (Optional) Customized capacity metric.
          id: "cap1"  # (Required) Unique identifier.
          label: "Capacity"  # (Optional) Label for the metric.
          expression: ""  # (Optional) Math expression.
          return_data: true  # (Optional) Default: true.
          metric_stat:
            metric:
              namespace: "AWS/EC2"
              metric_name: "CPUUtilization"
              dimensions:
                - name: "AutoScalingGroupName"
                  value: "my-asg"
            stat: "Average"
            unit: "Percent"
        customized_scaling:  # (Optional) Customized scaling metric.
          data_queries:  # (Optional) List of metric data queries.
            - id: "scale1"  # (Required) Unique identifier.
              label: "Scaling"  # (Optional) Label for the metric.
              expression: ""  # (Optional) Math expression.
              return_data: true  # (Optional) Default: true.
              metric_stat:
                metric:
                  namespace: "AWS/EC2"
                  metric_name: "CPUUtilization"
                  dimensions:
                    - name: "AutoScalingGroupName"
                      value: "my-asg"
                stat: "Average"
                unit: "Percent"
timeouts:  # (Optional) Operation timeouts for the Auto Scaling Group resource.
  update: "20m"  # (Optional) Timeout for create/update operations. Default: "20m".
  delete: "20m"  # (Optional) Timeout for delete operations. Default: "20m".
iam:  # (Optional) IAM resources configuration for EC2 instances (role and instance profile).
  create: true  # (Optional) Create IAM role and instance profile and attach to instances. Default: true.
  path: "/service-role/"  # (Optional) Path for the IAM role and instance profile. Default: null.
  role_description: "Role for ${name}"  # (Optional) Description for the IAM role. Default: "IAM Instance Role ${local.name}".
  permissions_boundary: "arn:aws:iam::...:policy/..."  # (Optional) ARN of the permissions boundary policy. Default: null.
  logs_enabled: false  # (Optional) Enable CloudWatch Logs delivery policy. Default: false.
  role_policies:  # (Optional) Map of managed policy attachments (key = logical name, value = policy ARN). Default: {}.
    CWAgent: "arn:aws:iam::aws:policy/CloudWatchAgentServerPolicy"
  extra_tags:  # (Optional) Extra tags to apply to IAM resources. Default: {}.
    Team: "Platform"

## Quick Start

1. Ensure you have AWS credentials configured.
2. Install Terraform and Terragrunt.
3. Create a `terragrunt.hcl` file with the module source and your configuration.
4. Run `terragrunt plan` to review the changes.
5. Run `terragrunt apply` to deploy the Auto Scaling Group.


## Examples

### Minimal Example

```hcl
terraform {
  source = "git::https://github.com/cloudopsworks/terraform-module-aws-ec2-autoscaling-group.git//?ref=vX.Y.Z"
}

inputs = {
  org = {
    organization_name = "acme"
    organization_unit = "platform"
    environment_type  = "dev"
    environment_name  = "sandbox"
  }
  name = "sandbox-api"
  asg = {
    type = "t3.micro"
    ami = {
      owners      = ["amazon"]
      name        = "ubuntu/images/hvm-ssd/ubuntu-focal-20.04-amd64-server-*"
      most_recent = true
    }
    vpc = { subnet_ids = ["subnet-12345678"] }
  }
}
```

### Advanced Example (Spot, Refresh, Scaling)

```hcl
terraform {
  source = "git::https://github.com/cloudopsworks/terraform-module-aws-ec2-autoscaling-group.git//?ref=vX.Y.Z"
}

inputs = {
  org = {
    organization_name = "acme"
    organization_unit = "platform"
    environment_type  = "prod"
    environment_name  = "payments"
  }
  name = "payments-worker"
  asg = {
    ami = { id = "ami-0123456789abcdef0" }
    spot = { enabled = true, interruption_behavior = "terminate" }
    mixed_instances = true
    instance_types  = [{ type = "t3.micro", capacity = "1" }, { type = "t3a.micro", capacity = "1" }]
    vpc = { subnet_ids = ["subnet-12345678", "subnet-87654321"] }
    instance_refresh = {
      enabled = true
      strategy = "Rolling"
      min_healthy_percentage = 50
    }
    scaling_policies = [
      {
        name = "cpu-target"
        tracking_configuration = {
          target_value = 70.0
          predefined   = { metric_type = "ASGAverageCPUUtilization" }
        }
      }
    ]
  }
}
```



## Makefile Targets
```
Available targets:

  help                                Help screen
  help/all                            Display help for all targets
  help/short                          This help short screen
  init/aws                            Initialize the project for a specific cloud provider: AWS
  init/azurerm                        Initialize the project for a specific cloud provider: Azure RM
  init/gcp                            Initialize the project for a specific cloud provider: GCP
  lint                                Lint terraform/opentofu code
  tag                                 Tag the current version

```
## Requirements

| Name | Version |
|------|---------|
| <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | >= 1.3 |
| <a name="requirement_aws"></a> [aws](#requirement\_aws) | ~> 6.4 |

## Providers

| Name | Version |
|------|---------|
| <a name="provider_aws"></a> [aws](#provider\_aws) | 6.26.0 |
| <a name="provider_tls"></a> [tls](#provider\_tls) | 4.1.0 |

## Modules

| Name | Source | Version |
|------|--------|---------|
| <a name="module_tags"></a> [tags](#module\_tags) | cloudopsworks/tags/local | 1.0.9 |

## Resources

| Name | Type |
|------|------|
| [aws_autoscaling_group.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/autoscaling_group) | resource |
| [aws_autoscaling_policy.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/autoscaling_policy) | resource |
| [aws_cloudwatch_event_rule.update_asg](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/cloudwatch_event_rule) | resource |
| [aws_cloudwatch_event_target.update_asg](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/cloudwatch_event_target) | resource |
| [aws_iam_instance_profile.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_instance_profile) | resource |
| [aws_iam_role.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_role) | resource |
| [aws_iam_role.update_asg](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_role) | resource |
| [aws_iam_role.update_asg_auto](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_role) | resource |
| [aws_iam_role_policy.logs](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_role_policy) | resource |
| [aws_iam_role_policy.udpate_asg_sqs](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_role_policy) | resource |
| [aws_iam_role_policy.update_asg](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_role_policy) | resource |
| [aws_iam_role_policy.update_asg_auto](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_role_policy) | resource |
| [aws_iam_role_policy_attachment.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_role_policy_attachment) | resource |
| [aws_iam_role_policy_attachment.update_asg_auto_ssm](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_role_policy_attachment) | resource |
| [aws_key_pair.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/key_pair) | resource |
| [aws_launch_template.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/launch_template) | resource |
| [aws_secretsmanager_secret.instance_private_key](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/secretsmanager_secret) | resource |
| [aws_secretsmanager_secret.instance_public_key](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/secretsmanager_secret) | resource |
| [aws_secretsmanager_secret_version.instance_private_key](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/secretsmanager_secret_version) | resource |
| [aws_secretsmanager_secret_version.instance_public_key](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/secretsmanager_secret_version) | resource |
| [aws_security_group.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/security_group) | resource |
| [aws_security_group_rule.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/security_group_rule) | resource |
| [aws_ssm_document.update_asg](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/ssm_document) | resource |
| [tls_private_key.this](https://registry.terraform.io/providers/hashicorp/tls/latest/docs/resources/private_key) | resource |
| [aws_ami.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/ami) | data source |
| [aws_caller_identity.current](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/caller_identity) | data source |
| [aws_cloudwatch_event_bus.default](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/cloudwatch_event_bus) | data source |
| [aws_iam_policy_document.assume_role](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/iam_policy_document) | data source |
| [aws_iam_policy_document.update_asg](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/iam_policy_document) | data source |
| [aws_iam_policy_document.update_asg_auto](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/iam_policy_document) | data source |
| [aws_iam_policy_document.update_asg_auto_trust](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/iam_policy_document) | data source |
| [aws_iam_policy_document.update_asg_sqs](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/iam_policy_document) | data source |
| [aws_iam_policy_document.update_asg_trust](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/iam_policy_document) | data source |
| [aws_partition.current](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/partition) | data source |
| [aws_region.current](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/region) | data source |
| [aws_subnet.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/subnet) | data source |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_asg"></a> [asg](#input\_asg) | The instance type to use for the EC2 Instance | `any` | `{}` | no |
| <a name="input_extra_tags"></a> [extra\_tags](#input\_extra\_tags) | Extra tags to add to the resources | `map(string)` | `{}` | no |
| <a name="input_iam"></a> [iam](#input\_iam) | The IAM role to use for the EC2 Instance | `any` | `{}` | no |
| <a name="input_is_hub"></a> [is\_hub](#input\_is\_hub) | Is this a hub or spoke configuration? | `bool` | `false` | no |
| <a name="input_name"></a> [name](#input\_name) | The name of the EC2 Instance | `string` | `""` | no |
| <a name="input_name_prefix"></a> [name\_prefix](#input\_name\_prefix) | The name prefix of the EC2 Instance | `string` | `""` | no |
| <a name="input_org"></a> [org](#input\_org) | Organization details | <pre>object({<br/>    organization_name = string<br/>    organization_unit = string<br/>    environment_type  = string<br/>    environment_name  = string<br/>  })</pre> | n/a | yes |
| <a name="input_spoke_def"></a> [spoke\_def](#input\_spoke\_def) | Spoke ID Number, must be a 3 digit number | `string` | `"001"` | no |
| <a name="input_timeouts"></a> [timeouts](#input\_timeouts) | The timeouts of the EC2 Instance | `any` | `{}` | no |

## Outputs

| Name | Description |
|------|-------------|
| <a name="output_autoscaling_group_arn"></a> [autoscaling\_group\_arn](#output\_autoscaling\_group\_arn) | n/a |
| <a name="output_autoscaling_group_id"></a> [autoscaling\_group\_id](#output\_autoscaling\_group\_id) | n/a |
| <a name="output_iam_role"></a> [iam\_role](#output\_iam\_role) | n/a |
| <a name="output_key_pair_name"></a> [key\_pair\_name](#output\_key\_pair\_name) | n/a |
| <a name="output_key_pair_public_key"></a> [key\_pair\_public\_key](#output\_key\_pair\_public\_key) | n/a |
| <a name="output_key_pair_ssh_private_key"></a> [key\_pair\_ssh\_private\_key](#output\_key\_pair\_ssh\_private\_key) | n/a |
| <a name="output_launch_template_arn"></a> [launch\_template\_arn](#output\_launch\_template\_arn) | n/a |
| <a name="output_launch_template_id"></a> [launch\_template\_id](#output\_launch\_template\_id) | n/a |
| <a name="output_security_group_id"></a> [security\_group\_id](#output\_security\_group\_id) | n/a |
| <a name="output_security_group_name"></a> [security\_group\_name](#output\_security\_group\_name) | n/a |



## Help

**Got a question?** We got answers. 

File a GitHub [issue](https://github.com/cloudopsworks/terraform-module-aws-ec2-autoscaling-group/issues), send us an [email][email] or join our [Slack Community][slack].

[![README Commercial Support][readme_commercial_support_img]][readme_commercial_support_link]

## DevOps Tools

## Slack Community


## Newsletter

## Office Hours

## Contributing

### Bug Reports & Feature Requests

Please use the [issue tracker](https://github.com/cloudopsworks/terraform-module-aws-ec2-autoscaling-group/issues) to report any bugs or file feature requests.

### Developing




## Copyrights

Copyright © 2024-2026 [Cloud Ops Works LLC](https://cloudops.works)





## License 

[![License](https://img.shields.io/badge/License-Apache%202.0-blue.svg)](https://opensource.org/licenses/Apache-2.0) 

See [LICENSE](LICENSE) for full details.

    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

      https://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.









## Trademarks

All other trademarks referenced herein are the property of their respective owners.

## About

This project is maintained by [Cloud Ops Works LLC][website]. 


### Contributors

|  [![Cristian Beraha][berahac_avatar]][berahac_homepage]<br/>[Cristian Beraha][berahac_homepage] |
|---|

  [berahac_homepage]: https://github.com/berahac
  [berahac_avatar]: https://github.com/berahac.png?size=50

[![README Footer][readme_footer_img]][readme_footer_link]
[![Beacon][beacon]][website]

  [logo]: https://cloudops.works/logo-300x69.svg
  [docs]: https://cowk.io/docs?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-ec2-autoscaling-group&utm_content=docs
  [website]: https://cowk.io/homepage?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-ec2-autoscaling-group&utm_content=website
  [github]: https://cowk.io/github?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-ec2-autoscaling-group&utm_content=github
  [jobs]: https://cowk.io/jobs?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-ec2-autoscaling-group&utm_content=jobs
  [hire]: https://cowk.io/hire?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-ec2-autoscaling-group&utm_content=hire
  [slack]: https://cowk.io/slack?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-ec2-autoscaling-group&utm_content=slack
  [linkedin]: https://cowk.io/linkedin?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-ec2-autoscaling-group&utm_content=linkedin
  [twitter]: https://cowk.io/twitter?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-ec2-autoscaling-group&utm_content=twitter
  [testimonial]: https://cowk.io/leave-testimonial?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-ec2-autoscaling-group&utm_content=testimonial
  [office_hours]: https://cloudops.works/office-hours?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-ec2-autoscaling-group&utm_content=office_hours
  [newsletter]: https://cowk.io/newsletter?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-ec2-autoscaling-group&utm_content=newsletter
  [email]: https://cowk.io/email?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-ec2-autoscaling-group&utm_content=email
  [commercial_support]: https://cowk.io/commercial-support?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-ec2-autoscaling-group&utm_content=commercial_support
  [we_love_open_source]: https://cowk.io/we-love-open-source?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-ec2-autoscaling-group&utm_content=we_love_open_source
  [terraform_modules]: https://cowk.io/terraform-modules?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-ec2-autoscaling-group&utm_content=terraform_modules
  [readme_header_img]: https://cloudops.works/readme/header/img
  [readme_header_link]: https://cloudops.works/readme/header/link?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-ec2-autoscaling-group&utm_content=readme_header_link
  [readme_footer_img]: https://cloudops.works/readme/footer/img
  [readme_footer_link]: https://cloudops.works/readme/footer/link?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-ec2-autoscaling-group&utm_content=readme_footer_link
  [readme_commercial_support_img]: https://cloudops.works/readme/commercial-support/img
  [readme_commercial_support_link]: https://cloudops.works/readme/commercial-support/link?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-ec2-autoscaling-group&utm_content=readme_commercial_support_link
  [share_twitter]: https://twitter.com/intent/tweet/?text=Terraform+EC2+Auto+Scaling+Group+Module&url=https://github.com/cloudopsworks/terraform-module-aws-ec2-autoscaling-group
  [share_linkedin]: https://www.linkedin.com/shareArticle?mini=true&title=Terraform+EC2+Auto+Scaling+Group+Module&url=https://github.com/cloudopsworks/terraform-module-aws-ec2-autoscaling-group
  [share_reddit]: https://reddit.com/submit/?url=https://github.com/cloudopsworks/terraform-module-aws-ec2-autoscaling-group
  [share_facebook]: https://facebook.com/sharer/sharer.php?u=https://github.com/cloudopsworks/terraform-module-aws-ec2-autoscaling-group
  [share_googleplus]: https://plus.google.com/share?url=https://github.com/cloudopsworks/terraform-module-aws-ec2-autoscaling-group
  [share_email]: mailto:?subject=Terraform+EC2+Auto+Scaling+Group+Module&body=https://github.com/cloudopsworks/terraform-module-aws-ec2-autoscaling-group
  [beacon]: https://ga-beacon.cloudops.works/G-7XWMFVFXZT/cloudopsworks/terraform-module-aws-ec2-autoscaling-group?pixel&cs=github&cm=readme&an=terraform-module-aws-ec2-autoscaling-group
